<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
	<head>
		<title>Widget</title>
		<style type="text/css">
			@import "css/reset.css";
			@import "css/widget.css";
		</style>
		<script type='text/javascript' src='/System/Library/WidgetResources/AppleClasses/AppleInfoButton.js' charset='utf-8'></script>
		<script type='text/javascript' src='/System/Library/WidgetResources/AppleClasses/AppleAnimator.js' charset='utf-8'></script>
		<script type='text/javascript' src='/System/Library/WidgetResources/AppleClasses/AppleButton.js' charset='utf-8'></script>
		<script type='text/javascript' src='js/jquery.js' charset='utf-8'></script>
		<script type='text/javascript' src='js/jquery.color.js' charset='utf-8'></script>
		<script type='text/javascript' src='js/jquery.helptext.js' charset='utf-8'></script>
		<script type='text/javascript' src='js/jquery.pulsate.js' charset='utf-8'></script>
		<script type='text/javascript' src='js/stopwatch.js' charset='utf-8'></script>
		<script type='text/javascript' src='js/utils.js' charset='utf-8'></script>
		<script type='text/javascript' src='js/idle.js' charset='utf-8'></script>
		<script type='text/javascript' src='js/widget.js' charset='utf-8'></script>
	</head>
	
	<body onload="setup()">
		<div id="front" class="widgetside" style="display:none">
			<div class="widgetcontent">
				<div id="watch"></div>
				<div class="loadindicator"><img src="images/ajax-loader.gif" alt="Loading..."/></div>
				
				<div id="projects_container">
					<select id="projects"><option disabled="disabled" value="">Select a project &raquo;</option><option disabled="disabled" value="">Login to obtain project list</option></select>
				</div>
				
				<a href="#" id="show_project">Open Basecamp</a>
				<a id="reportcontainerbutton" href="#">Report</a>
				
				<div id="time_container">
					<div id="timereset_container">
						<div id="timereset"></div>
						<span id="time">00:00:00</span>
					</div>
					<input type="button" value="Start" id="starttime" />
					<input type="button" value="Stop" id="stoptime" style="display:none" />
				</div>
				
				<div id="reportcontainer">
					<div>
						<div id="reporttime">
							<span>Time:<input type="text" value="0,0" id="reporthours" /> hours</span>
							<div id="reportdate_toggle"><span style="display:none" id="reportdate_arrow">&laquo;</span><span id="reportdate_text">today</span></div>
						</div>
						<select id="todos"><option disabled="disabled" value="">Select a to-do &raquo;</option><option disabled="disabled" value="">Select a project first</option></select><br/>
						<input type="text" value="" id="reportdescription" name="description" /><br/>
						<div id="reportdate"><select id="reportdate_m"><option/></select><select id="reportdate_d"><option/></select><select id="reportdate_y"><option/></select></div>
						<input type="button" id="reportbtn" value="Report" /><img id="reportloader" src="images/ajax-loader-submit.gif" alt="Loading..." /><br/>
					</div>
				</div>
				
				<div id="info">&nbsp;</div>
			</div>
		</div>
		<div id="back" class="widgetside">
			<div class="widgetcontent">
				<div class="loadindicator"><img src="images/ajax-loader-back.gif" alt="Loading..."/></div>
				<br/>
				<form action="#" method="get" id="login_form">
					<p>
						<label>Username:</label>
						<input type="text" value="" id="bc_username" />
					</p>
					<p>
						<label>Password:</label>
						<input type="password" value="" id="bc_password" />
					</p>
					<p>
						<label>Basecamp URL:</label>
						<input type="text" value="https://mycompany.basecamphq.com" id="bc_base_url" />
					</p>
					<p style="display:none">
						<label>User ID</label>
						<input type="text" value="0" id="bc_user_id" />
					</p>
					<p>
						<label>Round time to:</label>
						<select id="roundtime">
							<option value="60">Whole hours only</option>
							<option value="30">1/2 hour (30 min)</option>
							<option value="15">1/4 hour (15 min)</option>
							<option value="10">1/6 hour (10 min)</option>
							<option value="5">1/12 hour  (5 min)</option>
						</select>
					</p>
					<p id="pause_inactive_p">
						<label>Pause when inactive:</label>
						<input type="checkbox" id="pause_inactive" />
					</p>
					<p id="feedback_login_p">
						<input type="submit" id="loginbtn" value="Login" />
					</p>
					<a id="give_feedback" onclick="widget.openURL(this.getAttribute('href')); return false;" href="http://bitbucket.org/seph/basecamp-time-widget/issue/2/feedback">Give feedback</a>
				</form>
				
				<span class="debug" onclick="$('#debug').slideToggle(250)" id="debugbtn"></span><br/>
				<div class="debug" id="debug" style="display: none; width: 200px;">
					<input type="button" value="Reload Projects" onclick="pullProjects()" />
					<input type="button" value="Show report" onclick="$('#reportcontainer').show();" /><br/>
					
					<input type="button" value="Get User Id" onclick="pullUserId()" />
					<input type="button" value="Show front" onclick="showFront()" /><br/>
				</div>
				<div class="debug" id="your_user_id">N/A</div>
				<div id="version">v1.3</div>
				
				<div id="done">&nbsp;</div>
			</div>
		</div>
	</body>
</html>
